```mermaid
%%{init: {'themeVariables': {'fontSize': '10px'}}}%%
graph LR 
	A[数据层：化工规范PDF] --> B[处理层：PDF解析+文本预处理+向量存储] 
	B --> C[模型层：语义召回+大模型问答] 
	C --> D[应用层：用户交互界面]
```

## Workflow
1. PDF处理：提取文本+结构化信息=》将pdf转换为json output
2. 数据预处理：针对文本信息清洗和拆分，
3. 语义检索引擎搭建：
   嵌入模型：（文本-》向量）
   向量数据库： （存储+向量检索）
   检索逻辑实现：召回相关规范，再交由大模型生成回答
4. 问答模型搭建：
   大模型选型
   领域微调
   Prompt工程约束回答边界
5. 搭建应用界面
## MVP
| 功能模块       | 推荐工具 / 方案                                                                                                      | 选择理由                                                            |
| ---------- | -------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------- |
| PDF 文本提取   | `pdfplumber`（Python 库）                                                                                         | 免费开源，能精准提取文本 + 保留表格结构，对化工规范的 “章节 / 条款编号” 识别友好，比 PyPDF2 更易用。     |
| 文本嵌入（向量生成） | `text2vec-base-chinese`（开源模型，[https://github.com/shibing624/text2vec](https://github.com/shibing624/text2vec)） | 轻量（仅几百 MB），支持中文，无需 GPU，本地运行速度快，对化工术语的基础理解足够。                    |
| 向量存储与检索    | `Chroma`（开源向量数据库）                                                                                              | 纯 Python 实现，无需安装复杂服务，数据存在本地文件夹，支持 “一键初始化”，适合个人小规模数据（<1 万条规范片段）。 |
| 问答生成       | 免费 API 优先（如豆包 API、通义千问免费额度、GPT-3.5 Turbo 免费试用）                                                                 | 无需本地部署大模型，避免 GPU 依赖，个人使用免费额度足够（每月几百次调用），后续可切换开源模型。              |
| 界面搭建       | `Streamlit`（Python 库）                                                                                          | 几行代码出 Web 界面，支持文本输入、文件上传，运行后在浏览器打开即可用，无需前端知识。                   |
   
![[分享对话-豆包.png]]


# 化工规范知识库系统 - 项目结构

## 📁 完整项目结构


```

Chemical-specifications-knowledge-base/

├── 📄 核心程序文件

│ ├── integrated_pipeline.py # 🔧 主程序：集成处理管道 (14KB)

│ ├── search.py # 🔍 简单搜索脚本 (1.6KB)

│ ├── vector.py # 🧠 向量化存储系统 (16KB)

│ └── chemical_pdf_processor.py # 📄 PDF处理器 (18KB)

│

├── 📁 PDF文档目录 (2.8MB)

│ ├── 管道分析的规定-20161020.pdf # 📄 原始PDF文档 (989KB)

│ └── 管道分析的规定-20161020_structured.json # 📋 结构化数据 (1.8MB)

│

├── 📁 向量数据库 (20MB)

│ ├── chroma.sqlite3 # 🗄️ 主数据库文件 (3.3MB)

│ ├── processing_status.json # 📊 处理状态记录 (119B)

│ └── 1aa39456-aafa-42bf-9c7c-6788c140f7e2/ # 📦 向量数据存储 (16MB)

│ ├── data_level0.bin # 向量数据文件

│ ├── header.bin # 数据头文件

│ ├── length.bin # 长度索引文件

│ └── link_lists.bin # 链接列表文件

│

├── 📄 配置文件

│ ├── requirements.txt # 📦 Python依赖包列表 (182B)

│ ├── README.md # 📖 项目说明文档 (3.8KB)

│ └── PROJECT_STRUCTURE.md # 📋 项目结构文档 (本文件)

│

└── 📊 数据统计

├── 总文件数: 12个

├── 总大小: ~23MB

├── 文档块数: 390个

└── 向量维度: 384维 (all-MiniLM-L6-v2)

```

  

## 🏗️ 架构层次图

  

```

┌─────────────────────────────────────────────────────────┐

│ 用户界面层 │

├─────────────────────────────────────────────────────────┤

│ search.py │ integrated_pipeline.py │

│ (交互式搜索) │ (批处理管道) │

└─────────────────────┴───────────────────────────────────┘

│

┌─────────────────────────────────────────────────────────┐

│ 业务逻辑层 │

├─────────────────────────────────────────────────────────┤

│ vector.py │ chemical_pdf_processor.py │

│ (向量存储管理) │ (PDF内容提取) │

└─────────────────────┴───────────────────────────────────┘

│

┌─────────────────────────────────────────────────────────┐

│ 数据存储层 │

├─────────────────────────────────────────────────────────┤

│ chroma_db/ │ PDF/ │

│ (向量数据库) │ (文档存储) │

└─────────────────────┴───────────────────────────────────┘

```

  

## 📋 文件功能说明

  

### 🔧 核心程序文件

  

| 文件名 | 功能 | 大小 | 描述 |

|--------|------|------|------|

| `integrated_pipeline.py` | 主程序 | 14KB | 集成处理管道，处理PDF→JSON→向量化 |

| `search.py` | 搜索脚本 | 1.6KB | 简单的交互式搜索界面 |

| `vector.py` | 向量系统 | 16KB | ChromaDB向量存储和管理 |

| `chemical_pdf_processor.py` | PDF处理器 | 18KB | PDF内容提取和结构化处理 |

  

### 📁 数据目录

  

| 目录/文件 | 功能 | 大小 | 内容 |

|-----------|------|------|------|

| `PDF/` | 文档存储 | 2.8MB | 原始PDF和处理后的JSON文件 |

| `chroma_db/` | 向量数据库 | 20MB | ChromaDB数据库和向量存储 |

| `requirements.txt` | 依赖配置 | 182B | Python包依赖列表 |

| `README.md` | 项目说明 | 3.8KB | 项目使用说明和快速开始 |

  

## 🔄 数据流程图

  

```

📄 PDF文档

↓ (pdfplumber, PyMuPDF)

📋 结构化JSON

↓ (sentence-transformers)

🧠 向量化数据

↓ (ChromaDB)

🗄️ 向量数据库

↓ (语义搜索)

🔍 搜索结果

```

  

## 📊 数据统计

  

### 文档处理统计

- **PDF文件**: 1个 (989KB)

- **JSON文件**: 1个 (1.8MB)

- **文档块数**: 390个

- 文本块: 106个

- 页面块: 168个

- 表格块: 13个

- 章节块: 103个

  

### 向量数据库统计

- **数据库大小**: 20MB

- **向量维度**: 384维

- **存储格式**: ChromaDB

- **模型**: all-MiniLM-L6-v2

  

## 🚀 快速导航

  

### 开始使用

```bash

# 激活环境

conda activate CSKB

  

# 运行主程序

python integrated_pipeline.py

  

# 或直接搜索

python search.py

```

  

### 添加新文档

```bash

# 1. 将PDF放入PDF/目录

# 2. 运行处理程序

python integrated_pipeline.py

```

  

### 查看项目状态

```bash

# 查看处理状态

cat chroma_db/processing_status.json

  

# 查看数据库信息

python -c "from vector import ChemicalVectorStore; vs = ChemicalVectorStore(); print(vs.get_collection_info())"

```

  

---

  

**最后更新**: 2024年9月27日

**项目版本**: v1.0

**维护状态**: ✅ 活跃维护